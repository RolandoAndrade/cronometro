	LIST	P=16F84

AUX		EQU	12H
PCL		EQU	02H
MILI		EQU	11H
PB		EQU	06H
TRISB		EQU	06H
STATUS		EQU	03H
OP		EQU	01H
INTCON		EQU	0BH
VAR		EQU	10H
TMR0		EQU	01H
MILI10		EQU	15H
SEG		EQU	16H
SEG10		EQU	17H
RETA		EQU	18H
PA		EQU	05H
TRISA		EQU	05H
VAL		EQU	21H


	ORG	0
	GOTO	START


	ORG	80
START	BSF	STATUS,5
	MOVLW	B'10000000'
	MOVWF	TRISB
	MOVLW	B'00010000'
	MOVWF	TRISA
	MOVLW	B'11000111'
	MOVWF	OP
	BCF	STATUS,5
	CLRF	MILI
	CLRF	MILI10
	CLRF	SEG
	CLRF	SEG10


N1	BTFSS	PB,7
	GOTO	CONT	

INICIO	MOVF	MILI,0
	CALL	CONVERT
	MOVWF	PB
	BSF	PA,0
	CALL	RETARDO
	BCF	PA,0
	MOVF	MILI10,0
	CALL	CONVERT
	MOVWF	PB
	BSF	PA,1
	CALL	RETARDO
	BCF	PA,1
	MOVF	SEG,0
	CALL	CONVERT
	MOVWF	PB
	BSF	PA,2
	CALL	RETARDO
	BCF	PA,2
	MOVF	SEG10,0
	CALL	CONVERT
	MOVWF	PB
	BSF	PA,3
	CALL	RETARDO
	BCF	PA,3
	BTFSS	PA,4
	GOTO	FIN
	GOTO	N1

FIN	CLRF	INTCON
	GOTO	N1

RETARDO	MOVLW	H'FF'
	MOVWF	RETA
B1	DECFSZ	RETA,1
	GOTO	B1
	RETURN

CONVERT	ADDWF	PCL,1
	RETLW	B'11000000'
	RETLW	B'11111001'
	RETLW	B'10100100'
	RETLW	B'10110000'
	RETLW	B'10011001'
	RETLW	B'10010010'
	RETLW	B'10000010'
	RETLW	B'11111000'
	RETLW	B'10000000'
	RETLW	B'10011000'


CONT	MOVLW	B'10100000'	
	MOVWF	INTCON
	MOVLW	D'217'
	MOVWF	TMR0
	GOTO	INICIO


	ORG	4
	MOVWF	AUX
	INCF	MILI,1
	MOVF	MILI,0
	SUBLW	D'10'
	BTFSS	STATUS,2
	GOTO	A2
	CLRF	MILI
	INCF	MILI10,1
	MOVF	MILI10,0
	SUBLW	D'10'
	BTFSS	STATUS,2
	GOTO	A2
	CLRF	MILI10
	INCF	SEG,1
	MOVF	SEG,0
	SUBLW	D'10'
	BTFSS	STATUS,2
	GOTO	A2
	CLRF	SEG
	INCF	SEG10,1
	MOVF	SEG10,0
	SUBLW	D'6'
	BTFSS	STATUS,2
	GOTO	A2
	CLRF	SEG10
A2	MOVLW	D'217'
	MOVWF	TMR0
	BCF	INTCON,2
	MOVF	AUX,0
	RETFIE

	END
